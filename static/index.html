<html>
  <head></head>
  <body>
    <button id="signInButton" onclick="signInWithGoogle()">Sign In With Google</button>
    <h2 id="loggedInName"></h2>
    <script>
      const authURLPrefix = `http://localhost:8000/auth`
      const signInWithGoogle = () => {
        window.location.href = `${authURLPrefix}/login`;
      }

      const signOut = () => {
        window.location.href = `${authURLPrefix}/logout`;
      }

      const showProfileInfo = () => {
        fetch(`${authURLPrefix}/me`).then(
          response => response.json()
        ).then(
          (jsonResponse) => {
            console.log(jsonResponse);
            const nameObj = document.getElementById("loggedInName");
            nameObj.innerText = jsonResponse.name;
          }
        )
      }

      const isUserAuthenticated = () => {
        fetch(`${authURLPrefix}/me`, {method: "GET"}).then(
          (response) => {
            return response.json();
          }
        ).then(
          (jsonResponse) => {
            const signInButtonObj = document.getElementById("signInButton");
            signInButtonObj.innerText = "Sign Out";
            signInButtonObj.onclick = signInWithGoogle;
          }
        ).catch(
          (err) => {
            const signInButtonObj = document.getElementById("signInButton");
            signInButtonObj.innerText = "Sign in with Google";
            signInButtonObj.onclick = signOut;
          }
        )
      };

      isUserAuthenticated();
    </script>
  </body>
</html>